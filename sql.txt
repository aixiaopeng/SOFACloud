CREATE TABLE user (
    id BIGINT PRIMARY KEY  COMMENT '用户ID',
    user_name VARCHAR(64) NOT NULL COMMENT '用户名',
    password VARCHAR(128) NOT NULL COMMENT '密码',
    addr VARCHAR(64) COMMENT '地址',
    phone VARCHAR(16) COMMENT '电话号码',
    role VARCHAR(16) COMMENT '角色',
    status TINYINT(1) COMMENT '状态 (0 - 禁用, 1 - 启用)',
    created_at DATETIME COMMENT '创建时间',
    deleted_at DATETIME COMMENT '删除时间',
    updated_at DATETIME COMMENT '更新时间'
);



CREATE TABLE bank_card (
    id BIGINT PRIMARY KEY  COMMENT '银行卡ID',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    real_name VARCHAR(64) NOT NULL COMMENT '真实姓名',
    card_num VARCHAR(32) NOT NULL COMMENT '银行卡号',
    account DECIMAL(16,2) COMMENT '账户余额',
    created_at DATETIME COMMENT '创建时间',
    deleted_at DATETIME COMMENT '删除时间',
    updated_at DATETIME COMMENT '更新时间'
);

ALTER TABLE users
ADD COLUMN bank_card_id BIGINT,
ADD FOREIGN KEY (bank_card_id) REFERENCES bank_card(id);



CREATE TABLE shopping_cart (
    id BIGINT PRIMARY KEY COMMENT '购物车记录的唯一标识',
    user_id BIGINT COMMENT '用户 ID，与用户表相关联',
    product_id BIGINT COMMENT '产品 ID，与产品表相关联',
    created_at DATETIME COMMENT '记录创建时间',
    deleted_at DATETIME COMMENT '记录删除时间',
    updated_at DATETIME COMMENT '记录更新时间'
);




CREATE TABLE query_history (
    id BIGINT PRIMARY KEY COMMENT '购物车记录的唯一标识',
    user_id BIGINT COMMENT '用户 ID，与用户表相关联',
    product_id BIGINT COMMENT '产品 ID，与产品表相关联',
    created_at DATETIME COMMENT '记录创建时间',
    deleted_at DATETIME COMMENT '记录删除时间',
    updated_at DATETIME COMMENT '记录更新时间'
);








CREATE TABLE product (
    id BIGINT PRIMARY KEY COMMENT '产品ID',
    name VARCHAR(64) COMMENT '产品名称',
    parent_id BIGINT COMMENT '父产品ID',
    category BIGINT COMMENT '产品类别',
    status TINYINT(1) COMMENT '产品状态 (0 = 无效, 1 = 有效)',
    imgUrl VARCHAR(128) COMMENT '产品图片链接',
    description TEXT COMMENT '产品描述',
    price DECIMAL(16,2) COMMENT '产品价格',
    num INT COMMENT '产品数量',
    sold INT COMMENT '已售数量',
    discount_id BIGINT COMMENT '关联的折扣ID',
    created_at DATETIME COMMENT '创建时间',
    deleted_at DATETIME COMMENT '删除时间',
    updated_at DATETIME COMMENT '更新时间'
);


CREATE TABLE discount (
    id BIGINT PRIMARY KEY COMMENT '折扣ID',
    product_id BIGINT COMMENT '关联的产品ID',
    price DECIMAL(16,2) COMMENT '折扣价格',
    start_time DATETIME COMMENT '折扣开始时间',
    end_time DATETIME COMMENT '折扣结束时间'
);

CREATE TABLE product_comment (
    id BIGINT PRIMARY KEY COMMENT '评论ID',
    user_id BIGINT COMMENT '用户ID',
    product_id BIGINT COMMENT '产品ID',
    star INT COMMENT '评分',
    content TEXT COMMENT '评论内容',
    imgUrl VARCHAR(128) COMMENT '图片URL',
    created_at DATETIME COMMENT '创建时间',
    deleted_at DATETIME COMMENT '删除时间',
    updated_at DATETIME COMMENT '更新时间'
);




CREATE TABLE `order` (
    id BIGINT PRIMARY KEY COMMENT '订单ID',
    user_id BIGINT COMMENT '用户ID，关联到用户表',
    product_id BIGINT COMMENT '产品ID，关联到产品表',
    amount DECIMAL(16, 2) COMMENT '订单金额',
    addr VARCHAR(64) COMMENT '配送地址',
    status VARCHAR(16) COMMENT '订单状态',
    note TEXT COMMENT '订单备注',
    refund_time DATETIME COMMENT '退款时间',
    refund_amount DECIMAL(16, 2) COMMENT '退款金额',
    created_at DATETIME COMMENT '订单创建时间',
    deleted_at DATETIME COMMENT '订单删除时间',
    updated_at DATETIME COMMENT '订单更新时间'
) COMMENT '订单信息表，用于存储用户订单信息';


CREATE TABLE category (
    id BIGINT PRIMARY KEY COMMENT 'ID',
    category_name VARCHAR(128) COMMENT '分类名',
    created_at DATETIME COMMENT '创建时间',
    deleted_at DATETIME COMMENT '删除时间',
    updated_at DATETIME COMMENT '更新时间'
);


